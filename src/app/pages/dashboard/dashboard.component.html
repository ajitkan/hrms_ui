<main _ngcontent-muo-c27="" role="main" class="col col-lg-12 px-4 main-content"
  style="border: 1px black; border-radius: 10px;">
  <div _ngcontent-muo-c27="" class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-1">
    <h1 _ngcontent-muo-c27="" class="h2" style="margin: 0;/* background-color: blue; */color: #4C6FBF;">Employee Data
      Management</h1>
  </div>
  <hr _ngcontent-muo-c27="" style="margin-top: 1rem 0 0 0;">
  <div _ngcontent-muo-c27="" class="row">
    <div _ngcontent-muo-c27="" class="col-9">
      <div _ngcontent-muo-c27="" class="card">
        <div _ngcontent-muo-c27="" class="card-header"> {{ Month + " - " + currentYear}}

          
          <!-- <div class="d-flex flex-row align-items-center justify-content-end ms-3">
            <button type="button" class="btn btn-primary btn-sm me-2" (click)="checkIn()">Check In</button>
            <button type="button" class="btn btn-outline-secondary btn-sm" (click)="checkOut()">Check Out</button>
          </div> -->
        </div>
        <div _ngcontent-muo-c27="" class="card-body" style="
  padding: 1%;
">
          <div _ngcontent-muo-c27="" class="row">

            <div class="row">
              <div class="col">
                <table class="table table-sm table-bordered">
                  <thead>
                    <tr>
                      <th *ngFor="let day of ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']">{{ day }}</th>
                    </tr>
                    
                  </thead>

                  <tbody>
                    <tr *ngFor="let week of calendarData">
                      <td class="w14 
                        " *ngFor="let day of week" [ngClass]="[
                          day?.date && selectedDay?.date && isSameDate(day.date, selectedDay.date) ? 'selected-day' : '',
                          getDayClass(day)
                        ]" (click)="selectDay(day)"
                        [attr.data-bs-toggle]="day?.fullStatus && day.fullStatus !== 'NoStatus' ? 'tooltip' : null"
                        [attr.title]="day?.fullStatus && day.fullStatus !== 'NoStatus' ? (day?.remark || day?.fullStatus) : ''">




                        <div class="row" *ngIf="day">

                          <span class="col-6 fs-8 text-start">
                            <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'present'"
                              [style.color]="getStatusColor('Present')">■</span>
                            <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'weekoff'"
                              [style.color]="getStatusColor('WeekOff')">■</span>
                            <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'leaveapplied'"
                              [style.color]="getStatusColor('LeaveApplied')">■</span>
                            <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'leaveapproved'"
                              [style.color]="getStatusColor('LeaveApproved')">■</span>
                            <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'holiday'"
                              [style.color]="getStatusColor('Holiday')">■</span>
                            <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'halfday'"
                              [style.color]="getStatusColor('HalfDay')">■</span>
                            <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'absent'"
                              [style.color]="getStatusColor('Absent')">■</span>
                          </span>

                          <span class="col-5 text-end">
                            <h4>{{ day.date.getDate() }}</h4>
                          </span>
                        </div>

                      </td>


                    </tr>




                  </tbody>

                </table>





              </div>
              <!-- <div class="d-flex flex-column align-items-center justify-content-start ms-3">
                <button type="button" class="btn btn-success btn-sm mb-2" (click)="checkIn()">Check In</button>
                <button type="button" class="btn btn-danger btn-sm" (click)="checkOut()">Check Out</button>
              </div> -->
              <!-- <div class="d-flex flex-column align-items-center justify-content-start ms-3">
                <button type="button" class="btn btn-primary btn-sm mb-2" (click)="checkIn()">Check In</button>
                <button type="button" class="btn btn-outline-secondary btn-sm" (click)="checkOut()">Check Out</button>
              </div> -->

              <div class="d-flex flex-row align-items-center justify-content-end ms-3">
                <button type="button" class="btn btn-primary btn-sm me-2" (click)="checkIn()">Check In</button>
                <button type="button" class="btn btn-outline-secondary btn-sm" (click)="checkOut()">Check Out</button>
              </div>
             

            </div>



            <!-- <div class="row">
              <div class="d-flex align-items-start">
             
                <div class="flex-grow-1">
                  <table class="table table-sm table-bordered calendar-table">
                    <thead>
                      <tr>
                        <th *ngFor="let day of ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']">{{ day }}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let week of calendarData">
                        <td class="w14"
                          *ngFor="let day of week"
                          [ngClass]="[
                            day?.date && selectedDay?.date && isSameDate(day.date, selectedDay.date) ? 'selected-day' : '',
                            getDayClass(day)
                          ]"
                          (click)="selectDay(day)"
                          [attr.data-bs-toggle]="day?.fullStatus && day.fullStatus !== 'NoStatus' ? 'tooltip' : null"
                          [attr.title]="day?.fullStatus && day.fullStatus !== 'NoStatus' ? (day?.remark || day?.fullStatus) : ''">
                          <div class="day-content">
                            <div class="status-container">
                              <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'absent'"
                                    [style.color]="getStatusColor('Absent')">■</span>
                              <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'present'"
                                    [style.color]="getStatusColor('Present')">■</span>
                              <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'holiday'"
                                    [style.color]="getStatusColor('Holiday')">■</span>
                              <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'weekoff'"
                                    [style.color]="getStatusColor('WeekOff')">■</span>
                              <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'halfday'"
                                    [style.color]="getStatusColor('HalfDay')">■</span>
                              <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'leaveapproved'"
                                    [style.color]="getStatusColor('LeaveApproved')">■</span>
                              <span *ngIf="day.fullStatus?.toLowerCase().trim() === 'leaveapplied'"
                                    [style.color]="getStatusColor('LeaveApplied')">■</span>
                            </div>
                            <div class="date-text">{{ day.date.getDate() }}</div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
            
                
                <div class="d-flex flex-column align-items-center justify-content-start ms-3">
                  <button type="button" class="btn btn-primary btn-sm mb-2" (click)="checkIn()">Check In</button>
                  <button type="button" class="btn btn-outline-secondary btn-sm" (click)="checkOut()">Check Out</button>
                </div>
              </div>
             
            </div> -->



          </div>
          <!-- Legend -->
          <div class="legend">
            <span [style.color]="getStatusColor('Present')">■ Present</span>
            <span [style.color]="getStatusColor('Absent')">■ Absent</span>
            <span [style.color]="getStatusColor('WeekOff')">■ WeekOff</span>
            <span [style.color]="getStatusColor('LeaveApplied')">■ Leave Applied</span>
            <span [style.color]="getStatusColor('LeaveApproved')">■ Leave Approved</span>
            <span [style.color]="getStatusColor('Holiday')">■ Holiday</span>
            <span [style.color]="getStatusColor('HalfDay')">■ Half Day</span>
          </div>
        </div>


      </div>


    </div>



    <!-- </div>
        
           <div class="legend">
            <span [style.color]="getStatusColor('Present')">■ Present</span>
            <span [style.color]="getStatusColor('Absent')">■ Absent</span>
            <span [style.color]="getStatusColor('WeekOff')">■ WeekOff</span>
            <span [style.color]="getStatusColor('LeaveApplied')">■ Leave Applied</span>
            <span [style.color]="getStatusColor('LeaveApproved')">■ Leave Approved</span>
            <span [style.color]="getStatusColor('Holiday')">■ Holiday</span>
            <span [style.color]="getStatusColor('HalfDay')">■ Half Day</span>
          </div>
  
    </div>
     -->

    <div class="col-md-3">
      <div class="card">
        <div class="card-header">Events & Celebrations</div>
        <div class="card-body">
          <p *ngIf="categoryCounts['Birthday']" (click)="toggleDropdown('Birthday')">
            <span class="icon">🎂</span>
            {{ categoryCounts['Birthday'] }} Birthdays <span class="arrow">&#9660;</span>
          </p>
          <p *ngIf="categoryCounts['Event Invite']" (click)="toggleDropdown('Event Invite')">
            <span class="icon">📬</span>
            {{ categoryCounts['Event Invite'] }} Event Invites <span class="arrow">&#9660;</span>
          </p>
          <p *ngIf="categoryCounts['Work Anniversary']" (click)="toggleDropdown('Work Anniversary')">
            <span class="icon">💼</span>
            {{ categoryCounts['Work Anniversary'] }} Work Anniversaries <span class="arrow">&#9660;</span>
          </p>
          <p *ngIf="categoryCounts['Marriage Anniversary']" (click)="toggleDropdown('Marriage Anniversary')">
            <span class="icon">💍</span>
            {{ categoryCounts['Marriage Anniversary'] }} Marriage Anniversaries <span class="arrow">&#9660;</span>
          </p>
        </div>
      </div>
      <br>



      <!-- Dropdown menu for selected category -->
      <!-- <div class="dropdown-menu-container" *ngIf="isDropdownOpen">
        <ul id="holidayDropdownMenu" class="dropdown-menu show">
          <h6 class="dropdown-heading">{{ selectedCategory }} List</h6>
          <div *ngFor="let employee of filteredEmployees">
            <div class="holiday-item">
              <div class="holiday-header d-flex justify-content-between align-items-center">
                <span class="holiday-name">{{ employee.nameOfEmployee }}</span>
             
                <button class="Send-Message-btn btn-sm" (click)="sendMessageToEmployee(employee)">
                  Send Message
                </button>
              </div>
            </div>
          </div>
          <div *ngIf="filteredEmployees.length === 0">
            <p class="no-holidays">No {{ selectedCategory }} available.</p>
          </div>
        </ul>
      </div> -->

      <div class="holiday-dropdown-container" *ngIf="isDropdownOpen">
        <ul id="holidayDropdownMenu" class="holiday-dropdown-menu">
          <h6 class="holiday-dropdown-heading">{{ selectedCategory }} List</h6>
          <div *ngFor="let employee of filteredEmployees">
            <div class="holiday-item">
              <div class="holiday-row">
                <span class="holiday-name">{{ employee.nameOfEmployee }}</span>
                <button class="Send-Message-btn btn-sm" (click)="sendMessageToEmployee(employee)">
                  Send Message
                </button>
              </div>
            </div>
          </div>
          <div *ngIf="filteredEmployees.length === 0">
            <p class="no-holidays">No {{ selectedCategory }} available.</p>
          </div>
        </ul>
      </div>



      <div class="card">
        <div class="card-header">Upcoming Holiday</div>
        <div class="card-body">

          <div *ngIf="holidays.length > 0">
            <div class="holiday-item" *ngFor="let holiday of upcomingHolidays | slice:0:2">
              <div class="holiday-header">
                <span class="holiday-name">{{ holiday.name }}</span>
                <span class="holiday-date">{{ holiday.date | date }}</span>
              </div>
            </div>


            <button class="view-all-btn btn btn-sm" (click)="toggleHolidayList($event)">
              View all
              <i class="mdi mdi-chevron-down"></i>
            </button>


            <!-- <div class="dropdown-menu-container" *ngIf="isHolidayListOpen">
              <ul id="holidayDropdownMenu" class="dropdown-menu show">
                <h6 class="dropdown-heading">Holiday List</h6>
                <div *ngFor="let holiday of holidays">
                  <div class="holiday-item">
                    <div class="holiday-header">
                      <span class="holiday-name">{{ holiday.name }}</span>
                      <span class="holiday-date">{{ holiday.date | date }}</span>
                    </div>
                  </div>
                </div>
                <div *ngIf="holidays.length === 0">
                  <p class="no-holidays">No holidays available.</p>
                </div>
                <div class="dropdown-arrow"></div>
              </ul>
            </div> -->

            <div class="holiday-dropdown-container" *ngIf="isHolidayListOpen">
              <div class="holiday-dropdown-menu">
                <h6 class="dropdown-heading">Holiday List</h6>
                <div *ngFor="let holiday of holidays">
                  <div class="holiday-item">
                    <div class="holiday-header">
                      <span class="holiday-name">{{ holiday.name }}</span>
                      <span class="holiday-date">{{ holiday.date | date }}</span>
                    </div>
                  </div>
                </div>
                <div *ngIf="holidays.length === 0">
                  <p class="no-holidays">No holidays available.</p>
                </div>
                <div class="holiday-dropdown-arrow"></div>
              </div>
            </div>


          </div>
          <div *ngIf="holidays.length === 0">
            <p class="no-holidays">No holidays available.</p>
          </div>
        </div>
      </div>
    </div>


    <!-- My Payslip  Rewards and  -->
    <!-- <div _ngcontent-muo-c27="" class="col-md-3">
      <div _ngcontent-muo-c27="" class="row">
        <div _ngcontent-muo-c27="" class="col-md-12">
          <div _ngcontent-muo-c27="" class="card">
            <div _ngcontent-muo-c27="" class="card-header" style="
"> My Payslip </div>
            <div _ngcontent-muo-c27="" class="card-body" style="
  padding: 5px;
">
              <div class="row"><select _ngcontent-muo-c27="" class="form-control ml-3" style="
  width: 58%;
">
                  <option _ngcontent-muo-c27="">September 2023</option>
                </select><button _ngcontent-muo-c27="" class="btn btn-outline-secondary ml-1" style="
  width: 30%;
  /* padding: 0; */
"><i class="fa fa-arrow-circle-o-down" aria-hidden="true"></i></button></div>
            </div>
          </div>
        </div>
        <div _ngcontent-muo-c27="" class="col-md-12" style="margin: 10% 0 0 0;">
          <div _ngcontent-muo-c27="" class="card">
            <div _ngcontent-muo-c27="" class="card-header"> Rewards &amp; Recognition </div>
            <div _ngcontent-muo-c27="" class="card-body" style="padding: 5px;">
              <ul _ngcontent-muo-c27="" class="list-group">
                <li _ngcontent-muo-c27="" class="list-group-item" style="
  padding: 4% 0 4% 4%;
"><i class="fa fa-user-o" aria-hidden="true"></i> Santosh Yadav <span _ngcontent-muo-c27=""
                    class="badge badge-warning">★★★★☆</span></li>
                <li _ngcontent-muo-c27="" class="list-group-item" style="
  padding: 4% 0 4% 4%;
"><i class="fa fa-user-o" aria-hidden="true"></i> Priya Sharma <span _ngcontent-muo-c27=""
                    class="badge badge-warning">★★★★★</span></li>
                <li _ngcontent-muo-c27="" class="list-group-item" style="
  padding: 4% 0 4% 4%;
"><i class="fa fa-user-o" aria-hidden="true"></i> Manas Shinde <span _ngcontent-muo-c27=""
                    class="badge badge-warning">★★★★☆</span></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div> -->
  </div>
  <div _ngcontent-muo-c27="" class="row mt-4"></div>
  <div _ngcontent-muo-c27="" class="row">

    <!-- HRMS DOCUMENT -->
    <!-- <div _ngcontent-muo-c27="" class="col-md-3">
      <div _ngcontent-muo-c27="" class="card">
        <div _ngcontent-muo-c27="" class="card-header"> HRMS Documents </div>
        <div _ngcontent-muo-c27="" class="card-body">
          <div class="row"><input _ngcontent-muo-c27="" type="text" placeholder="Add Document"
              class="col-10 form-control" style="
  width: 70%;
"><button _ngcontent-muo-c27="" class="col-2 btn btn-primary m-auto" style="
  /* justify-content: center; */
  /* align-items: center; */
  /* align-content: center; */
"><i class="fa fa-eye" aria-hidden="true"></i></button></div>
        </div>
      </div>
    </div> -->







    <!-- <div class="col-md-3">
      <div class="card">
        <div class="card-header">Events & Celebrations</div>
        <div class="card-body">
          <p *ngIf="categoryCounts['Birthday']" (click)="toggleDropdown('Birthday')">
            <span class="icon">🎉</span>
            {{ categoryCounts['Birthday'] }} Birthdays <span class="arrow">&#9660;</span>
          </p>
          <p *ngIf="categoryCounts['Event Invite']" (click)="toggleDropdown('Event Invite')">
            {{ categoryCounts['Event Invite'] }} Event Invites<span class="arrow">&#9660;</span>
          </p>
          <p *ngIf="categoryCounts['Work Anniversary']" (click)="toggleDropdown('Work Anniversary')">
            {{ categoryCounts['Work Anniversary'] }} Work Anniversaries <span class="arrow">&#9660;</span>
          </p>
          <p *ngIf="categoryCounts['Marriage Anniversary']" (click)="toggleDropdown('Marriage Anniversary')">
            {{ categoryCounts['Marriage Anniversary'] }} Marriage Anniversaries<span class="arrow">&#9660;</span>
          </p>
        </div>
      </div>

   
      <div class="dropdown-menu-container" *ngIf="isDropdownOpen">
        <ul id="holidayDropdownMenu" class="dropdown-menu show">
          <h6 class="dropdown-heading">{{ selectedCategory }} List</h6>
          <div *ngFor="let employee of filteredEmployees">
            <div class="holiday-item">
              <div class="holiday-header d-flex justify-content-between align-items-center">
                <span class="holiday-name">{{ employee.nameOfEmployee }}</span>
              
                <button class="Send-Message-btn btn-sm" (click)="sendMessageToEmployee(employee)">
                  Send Message
                </button>
              </div>
            </div>
          </div>
          <div *ngIf="filteredEmployees.length === 0">
            <p class="no-holidays">No {{ selectedCategory }} available.</p>
          </div>
        </ul>
      </div>
    </div> -->




    <!-- 
    <div class="col-md-3">
      <div class="card">
        <div class="card-header">Upcoming Holiday</div>
        <div class="card-body">
         
          <div *ngIf="holidays.length > 0">
            <div class="holiday-item" *ngFor="let holiday of holidays | slice:0:2">
              <div class="holiday-header">
                <span class="holiday-name">{{ holiday.name }}</span>
                <span class="holiday-date">{{ holiday.date | date }}</span>
              </div>
            </div>

          
            <button class="view-all-btn btn btn-sm" (click)="toggleHolidayList($event)">
              View all
              <i class="mdi mdi-chevron-down"></i>
            </button>

        
            <div class="dropdown-menu-container" *ngIf="isHolidayListOpen">
              <ul id="holidayDropdownMenu" class="dropdown-menu show">
                <h6 class="dropdown-heading">Holiday List</h6>
                <div *ngFor="let holiday of holidays">
                  <div class="holiday-item">
                    <div class="holiday-header">
                      <span class="holiday-name">{{ holiday.name }}</span>
                      <span class="holiday-date">{{ holiday.date | date }}</span>
                    </div>
                  </div>
                </div>
                <div *ngIf="holidays.length === 0">
                  <p class="no-holidays">No holidays available.</p>
                </div>
                <div class="dropdown-arrow"></div>
              </ul>
            </div>
          </div>
          <div *ngIf="holidays.length === 0">
            <p class="no-holidays">No holidays available.</p>
          </div>
        </div>
      </div>
    </div> -->

    <!-- <div class="col-md-3">
      <div class="card">
        <div class="card-header">Upcoming Holidays</div>
        <div class="card-body">
         
          <div *ngIf="holidays.length > 0">
            <div class="holiday-item" *ngFor="let holiday of upcomingHolidays">
              <div class="holiday-header">
                <span class="holiday-name">{{ holiday.name }}</span>
                <span class="holiday-date">{{ holiday.date | date }}</span>
              </div>
            </div>
    
           
            <button
              class="btn btn-sm btn-primary view-all-btn"
              (click)="toggleHolidayList($event)"
              *ngIf="holidays.length > 2"
            >
              {{ isHolidayListOpen ? 'Collapse' : 'View all' }}
              <i
                class="mdi"
                [ngClass]="isHolidayListOpen ? 'mdi-chevron-up' : 'mdi-chevron-down'"
              ></i>
            </button>
          </div>
    
         
          <div *ngIf="holidays.length === 0">
            <p class="text-muted">No upcoming holidays available.</p>
          </div>
        </div>
      </div>
    </div>  -->


    <!-- <div _ngcontent-muo-c27="" class="col-md-3">
      <div _ngcontent-muo-c27="" class="card">
        <div _ngcontent-muo-c27="" class="card-header"> IT Help Desk </div>
        <div _ngcontent-muo-c27="" class="card-body row"><button _ngcontent-muo-c27=""
            class="col-5 btn btn-primary mr-1" style="
  font-size: 12px;
">New ticket</button><button _ngcontent-muo-c27="" class="col-6 btn btn-outline-secondary" style="
  font-size: 12px;
  padding: 0;
">Pending tickets</button></div>
      </div>
    </div> -->
  </div>
</main>