




<div *ngIf="alertMessage" class="alert alert-dismissible" 
     [ngClass]="{'alert-success': alertType === 'success', 'alert-danger': alertType === 'error'}" 
     role="alert">
  {{ alertMessage }}
</div>

<div class="education-container">
  <div class="row">
    <h3 style="width: 80%;">Education Details</h3>
    <button  *ngIf="!showform" id="basic" type="button" class="btn btn-primary" (click)="showForm();" style="width: 18%; padding: 0.5%;">
      <i class="bi bi-plus-circle"></i> Add Education
    </button>
  </div>
  
  <hr>
  <div  *ngIf="showform || (employeeDetails && employeeDetails.featchEmployeeDetailResponse.length<=0)" >
    <form class=" mt-4 educationForm"[formGroup]="educationForm">
      <div *ngFor="let row of dynamicFormService.getRows(fields); trackBy: dynamicFormService.trackByFn" class="form-row">
        <div *ngFor="let field of row" 
            [ngClass]="{'col-6': dynamicFormService.isSingleFieldOrButtonRow(row), 'form-group': true}">
          
          <!-- Render fields based on control type -->
          <ng-container *ngIf="field.controls !== 'BUTTON'">
            <label [for]="field.fieldName">{{ field.fieldTitle }}</label>
            
            <!-- Text Input -->
            <input *ngIf="field.controls === 'TEXTFIELD'"
                  [type]="dynamicFormService.getFieldType(field.fieldDataType)"
                  [id]="field.fieldName"
                  [formControlName]="field.fieldName"
                  [required]="field.isMandatory"
                  (input)="dynamicFormService.onTextInput($event)" />
            
            <!-- Dropdown -->
            <select *ngIf="field.controls === 'DROPDOWNLIST'"
                    [id]="field.fieldName"
                    [formControlName]="field.fieldName"
                    [required]="field.isMandatory">
              <option *ngFor="let option of field.options" [value]="option.value">{{ option.text }}</option>
            </select>
            
            <!-- Datepicker -->
            <input *ngIf="field.controls === 'DATEPICKER'"
                  type="date"
                  [id]="field.fieldName"
                  [formControlName]="field.fieldName"
                  [required]="field.isMandatory" />
          </ng-container>
        </div>
      </div>

      <!-- Button Row - Buttons based on field configuration -->
      <div class="button-container">
        <ng-container *ngFor="let field of fields">
          <button 
            *ngIf="field.controls === 'BUTTON'" 
            type="button" 
            (click)="onButtonClick(educationForm,field.fieldTitle)">
            <fa-icon [icon]="['fas', field.iconName]"></fa-icon>
            {{ field.fieldTitle }}
          </button>
        </ng-container>
      </div>
    </form>
  </div>

<div *ngIf="!showform || (employeeDetails && employeeDetails.featchEmployeeDetailResponse.length>0)">
<div class="accordion" id="accordionExample" *ngFor="let education of employeeDetails.featchEmployeeDetailResponse; let i=index;">
    <!-- First Panel -->
    <div class="accordion-item" style="
            margin: 0 9% 0 9%;
            bottom: 10px;
            position: relative;
        ">
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" style="/* background-color: gray; */">{{education.dynamicData.CourseTitle}}<span class="ms-auto">{{education.dynamicData.FromDate}} to {{education.dynamicData.ToDate}}</span>
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample" >
        <div class="accordion-body">
          <div class="card">
            <div class="card-header">
              <div class="d-flex " style="padding: 1%; ">                
                <div class="ms-3">
                  <h5 class="card-title"><b>College/School Name -</b>  {{education.dynamicData.College}}</h5>
                </div>
              </div>
            </div>
            <div class="card-body">
              <table class="table" >
                <tbody >
                <tr>
                  <td>Specialization</td>
                  <td>:  {{education.dynamicData.Specialization}}</td>    
                </tr>
                <tr>
                  <td>Duration</td>
                  <td>:  {{education.dynamicData.FromDate}} to  {{education.dynamicData.ToDate}}</td>
                </tr>
                <tr>
                  <td>Course Type</td>
                  <td>:  {{education.dynamicData.CourseType}}</td>
                </tr>
                <tr>
                  <td>Percentage</td>
                  <td>:  {{education.dynamicData.Percetage}} %</td>
                </tr>
              </tbody></table>
            </div>
            <div class="card-footer d-flex justify-content-end">
              <button class="btn btn-outline-primary me-2" (click)="EditEducation(education,i)">
                <i class="bi bi-pencil-fill"></i> Edit
              </button>
              <button class="btn btn-outline-danger">
                <i class="bi bi-trash-fill"></i> Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>


</div>
</div>
</div>
