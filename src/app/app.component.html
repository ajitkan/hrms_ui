<!-- 

<div class="wrapper" [ngClass]="{ 'dimmed-background': isModalOpen }">
  <app-login *ngIf="!IsLogin && !isSnapshot" (isLogin)="IsLoggedin($event)"></app-login>
  <app-change-password *ngIf="isSnapshot"></app-change-password>

  <div *ngIf="IsLogin" class="page-wrapper">
    
    <app-header (isLogin)="IsLoggedin($event)" (isCollapse)="isCollapse($event)" [notificationCount]="notificationCount"></app-header>

    <div class="main-content d-flex">
      <aside *ngIf="isFirstSidebarVisible" class="left-sidebar sidebar-dark" id="left-sidebar" [class.isCollapsedSideBar]="isCollapsedSideBar">
        <div id="sidebar" class="sidebar sidebar-with-footer">
          <div class="sidebar-left" data-simplebar style="height: 100%;">
           
            <ul class="nav flex-column">
              <li *ngFor="let screen of screens" class="nav-item">
                <a 
                  class="nav-link d-flex align-items-center" 
                  (click)="fetchTabs(screen.screenID); !screen.screenURL ?  navigateToURL(screen.screenURL): null">  
                  <i class="fas fa-icon mr-2"></i>
                  <span class="nav-text">{{ screen.screenDisplayName }}</span>
                </a>
              </li>
            </ul>
            
            
          </div>
        </div>
       
        
      </aside>

      
      <aside *ngIf="isSecondSidebarVisible && tabs != null" class="left1-sidebar sidebar-light" id="right-sidebar">
        <div id="sidebar-tabs" class="sidebar sidebar-with-footer">
          <div class="sidebar-left" data-simplebar style="height: 100%;">
            <ul class="nav flex-column">
              <li *ngFor="let tab of tabs" class="nav-item">
               
                <ng-container *ngIf="tab.tabTitle === 'Back'; else normalTab">
                  <button class="back-button" (click)="handleBackClick()">
                    <i class="fas fa-arrow-left"></i> 
                    Back
                  </button>
                </ng-container>
                <ng-template #normalTab>
                  <a class="nav-link d-flex align-items-center" (click)="selectTab(tab)">
                    <span class="nav-text">{{ tab.tabTitle }}</span>
                  </a>
                </ng-template>
              </li>
            </ul>
          </div>
        </div>
      </aside>
      <router-outlet></router-outlet>
    </div>
  </div>
  <app-footer></app-footer>
</div>
<app-reset-session *ngIf="isModalOpen" (isModalOpen.isModalOpen)="isModalOpen = true" ></app-reset-session> -->






<!-- <div class="wrapper" [ngClass]="{ 'dimmed-background': isModalOpen }">
  <app-login *ngIf="!IsLogin && !isSnapshot" (isLogin)="IsLoggedin($event)"></app-login>
  <app-change-password *ngIf="isSnapshot"></app-change-password>

  <div *ngIf="IsLogin" class="page-wrapper">
    <app-header (isLogin)="IsLoggedin($event)" (isCollapse)="isCollapse($event)" [notificationCount]="notificationCount"></app-header>

    <div class="main-content d-flex">
      <aside *ngIf="isFirstSidebarVisible" class="left-sidebar sidebar-dark" id="left-sidebar" [class.isCollapsedSideBar]="isCollapsedSideBar">
        <div id="sidebar" class="sidebar sidebar-with-footer">
          <div *ngIf="IsLogin" class="sidebar-left" data-simplebar style="height: 100%;">
         
            <ul class="nav flex-column">
              <li *ngFor="let screen of screens" class="nav-item">
                <div class="tree-node">
                  <span (click)="toggleScreen(screen)">
                    <i class="fas" [ngClass]="{'fa-caret-right': !screen.expanded, 'fa-caret-down': screen.expanded}"></i>
                    <span class="nav-text">{{ screen.screenDisplayName }}</span>
                  </span>
                  
                  <ul *ngIf="screen.expanded">
                    <li *ngFor="let tab of screen.tabs" class="nav-item">
                      <a class="nav-link d-flex align-items-center" (click)="selectTab(tab)">
                        <span class="nav-text">{{ tab.tabTitle }}</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </aside>

      <aside *ngIf="isSecondSidebarVisible && tabs != null" class="left1-sidebar sidebar-light" id="right-sidebar">
        <div id="sidebar-tabs" class="sidebar sidebar-with-footer">
          <div class="sidebar-left" data-simplebar style="height: 100%;">
            <ul class="nav flex-column">
              <li *ngFor="let tab of tabs" class="nav-item">
                <ng-container *ngIf="tab.tabTitle === 'Back'; else normalTab">
                  <button class="back-button" (click)="handleBackClick()">
                    <i class="fas fa-arrow-left"></i> Back
                  </button>
                </ng-container>
                <ng-template #normalTab>
                  <a class="nav-link d-flex align-items-center" (click)="selectTab(tab)">
                    <span class="nav-text">{{ tab.tabTitle }}</span>
                  </a>
                </ng-template>
              </li>
            </ul>
          </div>
        </div>
      </aside>
      <router-outlet></router-outlet>
    </div>
  </div>
  <app-footer></app-footer>
</div>

<app-reset-session *ngIf="isModalOpen" (isModalOpen.isModalOpen)="isModalOpen = true"></app-reset-session> -->


<!-- 
 <div class="wrapper" [ngClass]="{ 'dimmed-background': isModalOpen }">
  <app-login *ngIf="!IsLogin && !isSnapshot" (isLogin)="IsLoggedin($event)"></app-login>
  <app-change-password *ngIf="isSnapshot"></app-change-password>

 
  <div *ngIf="IsLogin" class="page-wrapper">
    <app-header (isLogin)="IsLoggedin($event)" (isCollapse)="isCollapse($event)" [notificationCount]="notificationCount"></app-header>

    <div class="main-content d-flex">
      <aside *ngIf="isFirstSidebarVisible" class="left-sidebar sidebar-dark" id="left-sidebar" [class.isCollapsedSideBar]="isCollapsedSideBar">
        <div id="sidebar" class="sidebar sidebar-with-footer">
          <div class="sidebar-left" data-simplebar style="height: 100%;">
           
            <ul class="nav flex-column">
              <li *ngFor="let screen of screens" class="nav-item">
                <div class="tree-node">
                  <span (click)="toggleScreen(screen)">
                    <i class="fas" [ngClass]="{'fa-caret-right': !screen.expanded, 'fa-caret-down': screen.expanded}"></i>
                    <span class="nav-text">{{ screen.screenDisplayName }}</span>
                  </span>
                  
                  <ul *ngIf="screen.expanded">
                    <li *ngFor="let tab of screen.tabs" class="nav-item">
                      <a class="nav-link d-flex align-items-center" (click)="selectTab(tab)">
                        <span class="nav-text">{{ tab.tabTitle }}</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </aside>

      <aside *ngIf="isSecondSidebarVisible && tabs != null" class="left1-sidebar sidebar-light" id="right-sidebar">
        <div id="sidebar-tabs" class="sidebar sidebar-with-footer">
          <div class="sidebar-left" data-simplebar style="height: 100%;">
            <ul class="nav flex-column">
              <li *ngFor="let tab of tabs" class="nav-item">
                <ng-container *ngIf="tab.tabTitle === 'Back'; else normalTab">
                  <button class="back-button" (click)="handleBackClick()">
                    <i class="fas fa-arrow-left"></i> Back
                  </button>
                </ng-container>
                <ng-template #normalTab>
                  <a class="nav-link d-flex align-items-center" (click)="selectTab(tab)">
                    <span class="nav-text">{{ tab.tabTitle }}</span>
                  </a>
                </ng-template>
              </li>
            </ul>
          </div>
        </div>
      </aside>
      <router-outlet></router-outlet>
    </div>
  </div>
  
  <app-footer *ngIf="IsLogin"></app-footer>
</div>

<app-reset-session *ngIf="isModalOpen" (isModalOpen.isModalOpen)="isModalOpen = true"></app-reset-session> --> 





<div class="wrapper" [ngClass]="{ 'dimmed-background': isModalOpen }">
  <!-- Login Component: Displayed only if not logged in -->
  <app-login *ngIf="!IsLogin && !isSnapshot" (isLogin)="IsLoggedin($event)"></app-login>
  
  <!-- Change Password Component: Displayed if a snapshot is active -->
  <app-change-password *ngIf="isSnapshot"></app-change-password>

  <!-- Main Content (Including Sidebar): Displayed only when logged in -->
  <div *ngIf="IsLogin" class="page-wrapper">
    
    <!-- Header -->
    <app-header (isLogin)="IsLoggedin($event)" (isCollapse)="isCollapse($event)" [notificationCount]="notificationCount"></app-header>

    <div class="main-content d-flex">
      
      <!-- First Sidebar -->
      <aside *ngIf="isFirstSidebarVisible" class="left-sidebar sidebar-dark" id="left-sidebar" [class.isCollapsedSideBar]="isCollapsedSideBar">
        <div id="sidebar" class="sidebar sidebar-with-footer">
          <div class="sidebar-left" data-simplebar style="height: 100%;">
            <ul class="nav flex-column">
              <li *ngFor="let screen of screens" class="nav-item">
                <div class="tree-node">
                  <span (click)="toggleScreen(screen)">
                    <i class="fas" [ngClass]="{'fa-caret-right': !screen.expanded, 'fa-caret-down': screen.expanded}"></i>
                    <span class="nav-text">{{ screen.screenDisplayName }}</span>
                  </span>
                  <ul *ngIf="screen.expanded">
                    <li *ngFor="let tab of screen.tabs" class="nav-item">
                      <a class="nav-link d-flex align-items-center" (click)="selectTab(tab)">
                        <span class="nav-text">{{ tab.tabTitle }}</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </aside>

      <!-- Second Sidebar (Visible only if there are tabs) -->
      <aside *ngIf="isSecondSidebarVisible && tabs != null" class="left1-sidebar sidebar-light" id="right-sidebar">
        <div id="sidebar-tabs" class="sidebar sidebar-with-footer">
          <div class="sidebar-left" data-simplebar style="height: 100%;">
            <ul class="nav flex-column">
              <li *ngFor="let tab of tabs" class="nav-item">
                <ng-container *ngIf="tab.tabTitle === 'Back'; else normalTab">
                  <button class="back-button" (click)="handleBackClick()">
                    <i class="fas fa-arrow-left"></i> Back
                  </button>
                </ng-container>
                <ng-template #normalTab>
                  <a class="nav-link d-flex align-items-center" (click)="selectTab(tab)">
                    <span class="nav-text">{{ tab.tabTitle }}</span>
                  </a>
                </ng-template>
              </li>
            </ul>
          </div>
        </div>
      </aside>

      <!-- Main Content Area (router-outlet) -->
      <router-outlet></router-outlet>
    </div>
  </div>

  <!-- Footer: Displayed only when logged in -->
  <app-footer *ngIf="IsLogin"></app-footer>
</div>

<!-- Reset Session Modal: Displayed when the modal is open -->
<app-reset-session *ngIf="isModalOpen" (isModalOpen.isModalOpen)="isModalOpen = true"></app-reset-session>
